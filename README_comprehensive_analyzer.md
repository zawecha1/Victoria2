# Victoria II 人口属性综合分析器使用指南

## 概述

`comprehensive_population_analyzer.py` 是一个强大的 Victoria II 存档文件人口属性分析工具，可以：

- 📊 分析所有人口块的详细属性
- 🔍 统计人口类型分布
- 📈 计算数值属性的统计数据（最小值、最大值、平均值、中位数等）
- 📋 分析分类属性的分布情况
- 💾 生成详细的JSON报告

## 使用方法

### 基本使用
```bash
python comprehensive_population_analyzer.py <存档文件.v2>
```

### 示例
```bash
python comprehensive_population_analyzer.py ChinaUseIt.v2
```

## 输出内容

### 1. 控制台报告
程序运行时会在控制台显示：
- 文件加载状态
- 分析进度
- 详细的统计报告

### 2. JSON数据文件
程序会自动生成一个 `<存档文件名>_comprehensive_analysis.json` 文件，包含：
- 完整的统计数据
- 所有属性的详细分析
- 分布情况和频率统计

## 分析的属性类型

### 人口基本信息
- **size**: 人口数量 - 该人口组的总人数
- **culture**: 文化归属 - 人口的文化身份
- **religion**: 宗教信仰 - 人口的宗教类型

### 人口状态属性
- **mil**: 斗争性 - 人口的革命倾向（0-10）
- **con**: 意识 - 人口的政治意识（0-10）
- **literacy**: 识字率 - 人口的教育水平（0-1）

### 经济属性
- **money**: 金钱 - 人口拥有的财富
- **bank**: 银行存款 - 人口的银行储蓄

### 需求满足度
- **luxury_needs**: 奢侈品需求 - 奢侈品消费情况（0-1）
- **everyday_needs**: 日常需求 - 基本生活需求满足度（0-1）
- **life_needs**: 生存需求 - 基本生存需求满足度（0-1）

### 政治倾向
- **ideology**: 意识形态分布 - 各种政治思想的支持度
- **issues**: 政策态度 - 对各项政策议题的态度

## 人口类型

程序识别以下12种人口类型：
1. **farmers** - 农民
2. **labourers** - 劳工
3. **clerks** - 文员
4. **artisans** - 工匠
5. **craftsmen** - 技工
6. **clergymen** - 神职人员
7. **officers** - 军官
8. **soldiers** - 士兵
9. **aristocrats** - 贵族
10. **capitalists** - 资本家
11. **bureaucrats** - 官僚
12. **intellectuals** - 知识分子

## 文化和宗教统计

### 常见文化类型
根据分析结果，主要文化包括：
- beifaren（北方人）
- manchu（满族）
- yankee（美国佬）
- british（英国人）
- russian（俄国人）
- 等等...

### 常见宗教类型
- mahayana（大乘佛教）
- catholic（天主教）
- protestant（新教）
- sunni（逊尼派）
- orthodox（东正教）
- 等等...

## 意识形态和政策议题

### 意识形态编号（推测）
- ideology_1: 反动派
- ideology_2: 保守派  
- ideology_3: 自由派（主流）
- ideology_4: 无政府主义
- ideology_5: 共产主义
- ideology_6: 社会主义
- ideology_7: 法西斯主义

### 政策议题编号
程序会分析多达80个不同的政策议题，每个议题都有对应的ID编号。

## 典型分析结果示例

```
📊 基本统计:
  总人口块数: 14,174

👥 人口类型分布:
  craftsmen   :  2,302 ( 16.2%)
  soldiers    :  1,960 ( 13.8%)
  farmers     :  1,955 ( 13.8%)
  ...

🔍 属性详细分析:
  📋 money - 金钱 - 人口拥有的财富
     类型: numeric
     出现次数: 14,174
     取值范围: 0.000 - 9999999999.000
     平均值: 3510653325.091
     中位数: 0.000
     唯一值数量: 248
```

## 性能说明

- 支持大型存档文件（测试过19MB+的文件）
- 使用进度显示，便于跟踪分析状态
- 内存友好的解析算法
- 通常分析时间：1-3分钟（取决于文件大小）

## 文件结构

- **输入**: Victoria II 存档文件（.v2格式）
- **输出**: 
  - 控制台详细报告
  - JSON数据文件（便于进一步分析）

## 与其他工具的区别

与基础的 `population_analyzer.py` 相比，这个综合版本：
- ✅ 更详细的属性分析
- ✅ 完整的统计计算
- ✅ 更好的数据组织
- ✅ JSON格式输出
- ✅ 意识形态和政策分析
- ✅ 需求满足度分析

## 故障排除

### 常见问题
1. **文件编码错误**: 程序使用 UTF-8-sig 编码处理
2. **内存不足**: 对于特别大的文件，可能需要更多内存
3. **解析失败**: 检查存档文件是否完整且未损坏

### 性能优化
- 程序已经优化了正则表达式匹配
- 使用分块处理大文件
- 进度显示帮助监控处理状态

## 用途示例

1. **游戏平衡分析**: 了解不同人口类型的分布
2. **MOD开发**: 分析人口属性的实际取值范围
3. **历史研究**: 研究特定时期的人口结构
4. **数据挖掘**: 提取大规模人口数据进行分析

这个工具为 Victoria II 玩家和MOD开发者提供了前所未有的人口数据分析能力！
